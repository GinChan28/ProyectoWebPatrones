<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title th:text="${vehiculo.idVehiculo} == null ? 'Registrar Vehículo' : 'Editar Vehículo'">
            Vehículo
        </title>

        <link rel="stylesheet"
              th:href="@{/webjars/bootstrap/5.3.7/css/bootstrap.min.css}">
        <link rel="stylesheet"
              th:href="@{/webjars/font-awesome/7.0.0/css/all.min.css}">

        <style>
            body {
                background: #eef3fb;
            }
            .card-form {
                border-radius: 24px;
                padding: 32px 40px;
                background: #ffffff;
                box-shadow: 0 15px 40px rgba(15, 23, 42, 0.12);
                max-width: 700px;
                margin: 40px auto;
            }
            .form-title {
                font-weight: 700;
                text-align: center;
                margin-bottom: 25px;
                font-size: 2rem;
            }
            .btn-rounded {
                border-radius: 999px;
                padding-left: 24px;
                padding-right: 24px;
            }
        </style>
    </head>
    <body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">
            <div class="container">

                <!-- Marca -->
                <a class="navbar-brand fw-bold" th:href="@{/cliente/dashboard}">
                    Taller Mecánico 
                </a>

                <!-- Botones derecha -->
                <div class="d-flex align-items-center gap-2 ms-auto">

                    <a th:href="@{/cliente/dashboard}"
                       class="btn btn-outline-light btn-sm fw-semibold">
                        <i class="fa-solid fa-arrow-left"></i>
                        Dashboard
                    </a>

                    <div sec:authorize="isAuthenticated()">
                        <form th:action="@{/logout}" method="post" class="m-0">
                            <button type="submit"
                                    class="btn btn-light btn-sm fw-semibold">
                                <i class="fa-solid fa-right-from-bracket"></i>
                                Cerrar sesión
                            </button>
                        </form>
                    </div>

                </div>

            </div>
        </nav>

        <div class="container py-5">
            <div class="card-form">

                <h2 class="form-title"
                    th:text="${vehiculo.idVehiculo} == null ? 'Registrar Vehículo' : 'Editar Vehículo'">
                    Registrar Vehículo
                </h2>

                <!-- IMPORTANTE: acción distinta según si es nuevo o edición -->
                <form th:action="${vehiculo.idVehiculo} == null ?
                      @{/cliente/vehiculo/guardar} :
                      @{/vehiculo/actualizar}"
                      th:object="${vehiculo}"
                      method="post">

                    <!-- ID oculto para que en edición JPA haga UPDATE y no INSERT -->
                    <input type="hidden" th:field="*{idVehiculo}"/>

                    <div class="mb-3">
                        <label class="form-label">Placa</label>
                        <input type="text" th:field="*{placa}" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Marca</label>
                        <input type="text" th:field="*{marca}" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Modelo</label>
                        <input type="text" th:field="*{modelo}" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Año</label>
                        <input type="number" th:field="*{anno}" class="form-control"
                               min="1950" max="2100" required>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a th:href="@{/cliente/mis-vehiculos}"
                           class="btn btn-outline-secondary btn-rounded">
                            Cancelar
                        </a>

                        <button type="submit" class="btn btn-primary btn-rounded">
                            <i class="fa-solid fa-floppy-disk me-1"></i>
                            Guardar
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <script th:src="@{/webjars/bootstrap/5.3.7/js/bootstrap.bundle.min.js}"></script>
    </body>
</html>
